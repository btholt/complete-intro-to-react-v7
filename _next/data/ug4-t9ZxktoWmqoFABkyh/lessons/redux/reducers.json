{"pageProps":{"post":{"attributes":{"description":""},"html":"<p>Make a new folder in src called <code>reducers</code>. Create a file called <code>index.js</code> in reducers and put:</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">import</span> { combineReducers } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;redux&quot;</span>;\n<span class=\"hljs-keyword\">import</span> location <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;./location&quot;</span>;\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-title function_\">combineReducers</span>({\n  location,\n});\n</code></pre>\n<p>combineReducers is a convenience function from Redux so you don&#39;t have to write your own root reducer. You can if you want to; this is just a bit easier. So now we have a root reducer that will delegate all changed to the <code>location</code> key to this reducer. So let&#39;s go make it. Make a file called <code>location.js</code> and put in it:</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">location</span>(<span class=\"hljs-params\">state = <span class=\"hljs-string\">&quot;Seattle, WA&quot;</span>, action</span>) {\n  <span class=\"hljs-keyword\">switch</span> (action.<span class=\"hljs-property\">type</span>) {\n    <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&quot;CHANGE_LOCATION&quot;</span>:\n      <span class=\"hljs-keyword\">return</span> action.<span class=\"hljs-property\">payload</span>;\n    <span class=\"hljs-attr\">default</span>:\n      <span class=\"hljs-keyword\">return</span> state;\n  }\n}\n</code></pre>\n<p>Not very difficult. A reducer takes an old state, an action, and combines those things to make a state. In this case, if the state is <code>San Francisco, CA</code> and some calls it with the action <code>{type: &#39;CHANGE_LOCATION&#39;: payload: &#39;Salt Lake City, UT&#39; }</code> then the <em>new</em> state location would be Salt Lake City, UT.</p>\n<p>A reducer must have a default state. In our case, using ES6 default params, we made Seattle, WA our default state. This is how Redux will initialize your store, by calling each of your reducers once to get a default state.</p>\n<p>The shape of the action object is up to you but there is a thing called [Flux Standard Action][fsa] that some people adhere to to make building tools on top of actions easier. I&#39;ve not used any of those tools but I also don&#39;t have a good reason <em>not</em> to use this shape so I do. In sum, make your action shapes be <code>{ type: &lt;[String, Number], required&gt;, payload: &lt;any?&gt;, error: &lt;any?&gt;, meta: &lt;any?&gt; }</code>. The type could in theory be a Symbol too but it messes up the dev tools.</p>\n<p>Reducers are synchronous: they cannot be async. They also must be pure with no side-effects. If you call a reducer 10,000,000 times with the same state and action, you should get the same answer on the 10,000,001st time.</p>\n<p>Okay, so now we understand how, once given a state and an action, we can make a reducer. We haven&#39;t made nor dispatched those actions yet but we&#39;re getting there. Let&#39;s make the other reducers.</p>\n<p>theme.js</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">theme</span>(<span class=\"hljs-params\">state = <span class=\"hljs-string\">&quot;darkblue&quot;</span>, action</span>) {\n  <span class=\"hljs-keyword\">switch</span> (action.<span class=\"hljs-property\">type</span>) {\n    <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&quot;CHANGE_THEME&quot;</span>:\n      <span class=\"hljs-keyword\">return</span> action.<span class=\"hljs-property\">payload</span>;\n    <span class=\"hljs-attr\">default</span>:\n      <span class=\"hljs-keyword\">return</span> state;\n  }\n}\n</code></pre>\n<p>animal.js</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">animal</span>(<span class=\"hljs-params\">state = <span class=\"hljs-string\">&quot;&quot;</span>, action</span>) {\n  <span class=\"hljs-keyword\">switch</span> (action.<span class=\"hljs-property\">type</span>) {\n    <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&quot;CHANGE_ANIMAL&quot;</span>:\n      <span class=\"hljs-keyword\">return</span> action.<span class=\"hljs-property\">payload</span>;\n    <span class=\"hljs-attr\">default</span>:\n      <span class=\"hljs-keyword\">return</span> state;\n  }\n}\n</code></pre>\n<p>breed.js</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">breed</span>(<span class=\"hljs-params\">state = <span class=\"hljs-string\">&quot;&quot;</span>, action</span>) {\n  <span class=\"hljs-keyword\">switch</span> (action.<span class=\"hljs-property\">type</span>) {\n    <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&quot;CHANGE_BREED&quot;</span>:\n      <span class=\"hljs-keyword\">return</span> action.<span class=\"hljs-property\">payload</span>;\n    <span class=\"hljs-keyword\">case</span> <span class=\"hljs-string\">&quot;CHANGE_ANIMAL&quot;</span>:\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;&quot;</span>;\n    <span class=\"hljs-attr\">default</span>:\n      <span class=\"hljs-keyword\">return</span> state;\n  }\n}\n</code></pre>\n<ul>\n<li>For this one, any time we issue a change animal action, we want to reset the breed to be nothing selected so we don&#39;t allow users to select tabby dogs or poodle cats (which sounds terrifying.)</li>\n</ul>\n<p>index.js</p>\n<pre><code class=\"hljs language-javascript\"><span class=\"hljs-keyword\">import</span> { combineReducers } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;redux&quot;</span>;\n<span class=\"hljs-keyword\">import</span> location <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;./location&quot;</span>;\n<span class=\"hljs-keyword\">import</span> theme <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;./theme&quot;</span>;\n<span class=\"hljs-keyword\">import</span> animal <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;./animal&quot;</span>;\n<span class=\"hljs-keyword\">import</span> breed <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;./breed&quot;</span>;\n\n<span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-title function_\">combineReducers</span>({\n  location,\n  theme,\n  animal,\n  breed,\n});\n</code></pre>\n","slug":"reducers","title":"Reducers","section":"Redux","icon":"database","filePath":"/home/runner/work/complete-intro-to-react-v7/complete-intro-to-react-v7/lessons/15-redux/B-reducers.md","nextSlug":"/complete-intro-to-react-v7/lessons/redux/action-creators","prevSlug":"/complete-intro-to-react-v7/lessons/redux/redux"}},"__N_SSG":true}